{"version":3,"file":"sanity-plugin-latex-input.cjs.production.min.js","sources":["../src/index.tsx","../src/components/LatexPreview.tsx"],"sourcesContent":["import LatexPreview from './components/LatexPreview';\n\nexport default {\n  name: 'latex',\n  type: 'object',\n  fields: [\n    {\n      title: 'LaTeX content',\n      name: 'body',\n      type: 'text',\n    },\n  ],\n  preview: {\n    select: {\n      body: 'body',\n    },\n    prepare(selection: object) {\n      return selection;\n    },\n    component: LatexPreview,\n  },\n};\n","import React, { useState, useMemo } from 'react';\nimport KaTeX from 'katex';\nimport 'katex/dist/katex.min.css?raw';\n\ntype SchemaDefinition = {\n  body?: string;\n};\n\ntype PreviewProps = {\n  value?: SchemaDefinition;\n  layout?: string;\n};\n\nconst LatexPreview = (props: PreviewProps) => {\n  const latex = (props.value && props.value.body) || '';\n  const isInline = props.layout === 'inline';\n  const [html, setHtml] = useState<string>('');\n  const createHtml = () => {\n    setHtml(\n      KaTeX.renderToString(latex, {\n        displayMode: !isInline,\n        throwOnError: false,\n      })\n    );\n  };\n\n  useMemo(createHtml, [latex, isInline]);\n  if (isInline) {\n    return <span dangerouslySetInnerHTML={{ __html: html }} />;\n  }\n  return <div dangerouslySetInnerHTML={{ __html: html }} />;\n};\n\nexport default LatexPreview;\n"],"names":["name","type","fields","title","preview","select","body","prepare","selection","component","props","latex","value","isInline","layout","useState","html","setHtml","useMemo","KaTeX","renderToString","displayMode","throwOnError","React","dangerouslySetInnerHTML","__html"],"mappings":"sPAEe,CACbA,KAAM,QACNC,KAAM,SACNC,OAAQ,CACN,CACEC,MAAO,gBACPH,KAAM,OACNC,KAAM,SAGVG,QAAS,CACPC,OAAQ,CACNC,KAAM,QAERC,iBAAQC,UACCA,GAETC,UCNiB,SAACC,OACdC,EAASD,EAAME,OAASF,EAAME,MAAMN,MAAS,GAC7CO,EAA4B,WAAjBH,EAAMI,SACCC,WAAiB,IAAlCC,OAAMC,cAUbC,WATmB,WACjBD,EACEE,EAAMC,eAAeT,EAAO,CAC1BU,aAAcR,EACdS,cAAc,OAKA,CAACX,EAAOE,IAEnBU,gBADLV,gBACWW,wBAAyB,CAAEC,OAAQT"}