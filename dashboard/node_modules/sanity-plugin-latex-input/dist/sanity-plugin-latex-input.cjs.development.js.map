{"version":3,"file":"sanity-plugin-latex-input.cjs.development.js","sources":["../src/components/LatexPreview.tsx","../src/index.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport KaTeX from 'katex';\nimport 'katex/dist/katex.min.css?raw';\n\ntype SchemaDefinition = {\n  body?: string;\n};\n\ntype PreviewProps = {\n  value?: SchemaDefinition;\n  layout?: string;\n};\n\nconst LatexPreview = (props: PreviewProps) => {\n  const latex = (props.value && props.value.body) || '';\n  const isInline = props.layout === 'inline';\n  const [html, setHtml] = useState<string>('');\n  const createHtml = () => {\n    setHtml(\n      KaTeX.renderToString(latex, {\n        displayMode: !isInline,\n        throwOnError: false,\n      })\n    );\n  };\n\n  useMemo(createHtml, [latex, isInline]);\n  if (isInline) {\n    return <span dangerouslySetInnerHTML={{ __html: html }} />;\n  }\n  return <div dangerouslySetInnerHTML={{ __html: html }} />;\n};\n\nexport default LatexPreview;\n","import LatexPreview from './components/LatexPreview';\n\nexport default {\n  name: 'latex',\n  type: 'object',\n  fields: [\n    {\n      title: 'LaTeX content',\n      name: 'body',\n      type: 'text',\n    },\n  ],\n  preview: {\n    select: {\n      body: 'body',\n    },\n    prepare(selection: object) {\n      return selection;\n    },\n    component: LatexPreview,\n  },\n};\n"],"names":["LatexPreview","props","latex","value","body","isInline","layout","useState","html","setHtml","createHtml","KaTeX","renderToString","displayMode","throwOnError","useMemo","React","dangerouslySetInnerHTML","__html","name","type","fields","title","preview","select","prepare","selection","component"],"mappings":";;;;;;;;;;;AAaA,IAAMA,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD;AACnB,MAAMC,KAAK,GAAID,KAAK,CAACE,KAAN,IAAeF,KAAK,CAACE,KAAN,CAAYC,IAA5B,IAAqC,EAAnD;AACA,MAAMC,QAAQ,GAAGJ,KAAK,CAACK,MAAN,KAAiB,QAAlC;;kBACwBC,cAAQ,CAAS,EAAT;MAAzBC;MAAMC;;AACb,MAAMC,UAAU,GAAG,SAAbA,UAAa;AACjBD,IAAAA,OAAO,CACLE,KAAK,CAACC,cAAN,CAAqBV,KAArB,EAA4B;AAC1BW,MAAAA,WAAW,EAAE,CAACR,QADY;AAE1BS,MAAAA,YAAY,EAAE;AAFY,KAA5B,CADK,CAAP;AAMD,GAPD;;AASAC,EAAAA,aAAO,CAACL,UAAD,EAAa,CAACR,KAAD,EAAQG,QAAR,CAAb,CAAP;;AACA,MAAIA,QAAJ,EAAc;AACZ,WAAOW,4BAAA,OAAA;AAAMC,MAAAA,uBAAuB,EAAE;AAAEC,QAAAA,MAAM,EAAEV;AAAV;KAA/B,CAAP;AACD;;AACD,SAAOQ,4BAAA,MAAA;AAAKC,IAAAA,uBAAuB,EAAE;AAAEC,MAAAA,MAAM,EAAEV;AAAV;GAA9B,CAAP;AACD,CAlBD;;ACXA,YAAe;AACbW,EAAAA,IAAI,EAAE,OADO;AAEbC,EAAAA,IAAI,EAAE,QAFO;AAGbC,EAAAA,MAAM,EAAE,CACN;AACEC,IAAAA,KAAK,EAAE,eADT;AAEEH,IAAAA,IAAI,EAAE,MAFR;AAGEC,IAAAA,IAAI,EAAE;AAHR,GADM,CAHK;AAUbG,EAAAA,OAAO,EAAE;AACPC,IAAAA,MAAM,EAAE;AACNpB,MAAAA,IAAI,EAAE;AADA,KADD;AAIPqB,IAAAA,OAJO,mBAICC,SAJD;AAKL,aAAOA,SAAP;AACD,KANM;AAOPC,IAAAA,SAAS,EAAE3B;AAPJ;AAVI,CAAf;;;;"}